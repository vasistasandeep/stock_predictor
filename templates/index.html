<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Predictor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .tooltip-custom {
            cursor: help;
            border-bottom: 2px dotted #007bff;
        }
        .info-icon {
            color: #007bff;
            cursor: help;
            margin-left: 5px;
        }
        .expanded-term {
            font-weight: 600;
            color: #495057;
        }
        .tooltip-inner {
            max-width: 300px;
            text-align: left;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-chart-line me-2"></i>Stock Predictor
                <span class="badge bg-success ms-2">PRO</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="/">
                            <i class="fas fa-home me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/pricing">
                            <i class="fas fa-tags me-1"></i>Pricing
                        </a>
                    </li>
                </ul>
                <div class="navbar-nav">
                    <button class="btn btn-outline-light btn-sm me-2" onclick="showOnboarding()" title="View Help & Tutorial">
                        <i class="fas fa-question-circle me-1"></i>Help
                    </button>
                    <button class="btn btn-outline-warning btn-sm me-2" onclick="resetOnboarding()" title="Reset Tutorial (Show on next visit)">
                        <i class="fas fa-redo me-1"></i>Reset Tour
                    </button>
                    <a href="/pricing" class="btn btn-success btn-sm">
                        <i class="fas fa-crown me-1"></i>Upgrade Plan
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="text-center mb-4">
            <h1 class="text-center">
                <span class="expanded-term">Nifty 200</span> Stock Analysis
                <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                   title="Nifty 200: Index of India's top 200 largest companies by market capitalization. These are the biggest and most stable stocks in the Indian stock market."></i>
            </h1>
            <p class="text-muted">
                Get intelligent buy/sell recommendations for India's top 200 stocks with technical analysis and risk-based predictions
            </p>
        </div>
        
        <!-- Stock Filters Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            Stock Filters
                            <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                               title="Use filters to narrow down stocks based on your trading preferences and risk appetite."></i>
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-2">
                                <label for="signalFilter" class="form-label">
                                    Signal Type
                                    <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                       title="Signal: Buy (stock likely to go up), Sell (stock likely to go down), Hold (wait and watch). Based on technical analysis."></i>
                                </label>
                                <select class="form-select" id="signalFilter">
                                    <option value="all">All Signals</option>
                                    <option value="buy">Buy Only</option>
                                    <option value="sell">Sell Only</option>
                                    <option value="hold">Hold Only</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="riskFilter" class="form-label">
                                    Risk Level
                                    <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                       title="Risk Level: Low (safe investments, 2% stop-loss), Medium (balanced, 5% stop-loss), High (aggressive, 10% stop-loss). Higher risk = higher potential returns."></i>
                                </label>
                                <select class="form-select" id="riskFilter">
                                    <option value="all">All Risks</option>
                                    <option value="low">üü¢ Low Risk</option>
                                    <option value="medium">üü° Medium Risk</option>
                                    <option value="high">üî¥ High Risk</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="sectorFilter" class="form-label">
                                    Sector
                                    <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                       title="Sector: Industry category like Technology (IT companies), Banking (banks), FMCG (daily use products), Pharma (medicines), Auto (cars/bikes)."></i>
                                </label>
                                <select class="form-select" id="sectorFilter">
                                    <option value="all">All Sectors</option>
                                    <option value="tech">Technology</option>
                                    <option value="banking">Banking</option>
                                    <option value="fmcg">FMCG</option>
                                    <option value="pharma">Pharma</option>
                                    <option value="auto">Automobile</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="marketCapFilter" class="form-label">
                                    Market Cap
                                    <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                       title="Market Cap: Total company value. Large Cap (>‚Çπ50,000 Cr) = very stable, Mid Cap (‚Çπ10,000-50,000 Cr) = balanced, Small Cap (<‚Çπ10,000 Cr) = growth potential but risky."></i>
                                </label>
                                <select class="form-select" id="marketCapFilter">
                                    <option value="all">All Market Caps</option>
                                    <option value="large">Large Cap (>‚Çπ50,000 Cr)</option>
                                    <option value="mid">Mid Cap (‚Çπ10,000-50,000 Cr)</option>
                                    <option value="small">Small Cap (<‚Çπ10,000 Cr)</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="sortBy" class="form-label">
                                    Sort By
                                    <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                       title="Sort By: Market Cap (company size), Signal Strength (buy/sell confidence), RSI Level (momentum indicator), Name (alphabetical)."></i>
                                </label>
                                <select class="form-select" id="sortBy">
                                    <option value="marketcap">Market Cap</option>
                                    <option value="signal">Signal Strength</option>
                                    <option value="rsi">RSI Level</option>
                                    <option value="name">Company Name</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="quickAction" class="form-label">
                                    Quick Action
                                    <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                       title="Quick Actions: Analyze All = get signals for all visible stocks, Export = download current analysis as Excel file."></i>
                                </label>
                                <div class="btn-group w-100" role="group">
                                    <button class="btn btn-sm btn-outline-success" id="analyzeAllBtn" title="Analyze all stocks with current risk level">
                                        üìä Analyze All
                                    </button>
                                    <button class="btn btn-sm btn-outline-primary" id="exportBtn" title="Export current view">
                                        üì• Export
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-12">
                                <button class="btn btn-primary" id="applyFilters">Apply Filters</button>
                                <button class="btn btn-secondary" id="resetFilters">Reset</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <!-- Top 20 Stocks - Now more prominent -->
            <div class="col-lg-5">
                <div class="card sticky-top" style="top: 20px;">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            üî• Top 20 <span class="expanded-term">Nifty 200</span> Stocks
                            <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                               title="Top 20: Largest 20 companies from Nifty 200 index. These are market leaders with highest trading volumes and stability."></i>
                        </h5>
                        <span class="badge bg-info" id="stockCount">0 stocks</span>
                    </div>
                    <div class="card-body p-0">
                        <div class="stock-filters-bar bg-light p-2 border-bottom">
                            <input type="text" class="form-control form-control-sm" id="stockSearch" placeholder="üîç Search stocks by company name or symbol...">
                        </div>
                        <div class="stock-list-container" style="max-height: 600px; overflow-y: auto;">
                            <ul class="list-group list-group-flush" id="top20list">
                                <!-- Stocks will be loaded here -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Analysis Section -->
            <div class="col-lg-7">
                <!-- Prediction Card -->
                <div class="card mb-4">
                    <div class="card-header bg-gradient text-white" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <h5 class="mb-0">
                            üìä Trading Prediction
                            <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                               title="Trading Prediction: AI-powered recommendations based on technical analysis. Shows when to buy, sell, or hold stocks with specific price targets."></i>
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info mb-3">
                            <h6 class="alert-heading">üìä How Trading Analysis Works:</h6>
                            <div class="row">
                                <div class="col-md-4">
                                    <strong>üü¢ Buy Signal:</strong> Stock likely to go up
                                </div>
                                <div class="col-md-4">
                                    <strong>üî¥ Sell Signal:</strong> Stock likely to go down
                                </div>
                                <div class="col-md-4">
                                    <strong>üü° Hold Signal:</strong> Wait for better opportunity
                                </div>
                            </div>
                            <hr>
                            <small class="mb-0">
                                <strong>Risk Levels Explained:</strong> 
                                üõ°Ô∏è Conservative = Safe investments (2% loss limit), 
                                ‚öñÔ∏è Balanced = Moderate risk (5% loss limit), 
                                üöÄ Aggressive = High risk/reward (10% loss limit)
                            </small>
                        </div>
                        
                        <div class="row text-center">
                            <div class="col-md-3">
                                <div class="prediction-box">
                                    <h6 class="text-muted">
                                        Signal
                                        <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                           title="Signal: Buy = Good time to purchase, Sell = Good time to sell, Hold = Wait for better opportunity. Based on price patterns and indicators."></i>
                                    </h6>
                                    <h3 id="signal" class="badge bg-secondary fs-5">-</h3>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="prediction-box">
                                    <h6 class="text-muted">
                                        Entry Price
                                        <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                           title="Entry Price: Recommended price to buy the stock. Based on recent low prices and support levels."></i>
                                    </h6>
                                    <h4 id="entryPrice" class="entry-price">-</h4>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="prediction-box">
                                    <h6 class="text-muted">
                                        Exit Price
                                        <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                           title="Exit Price: Target price to sell for profit. Based on recent high prices and resistance levels."></i>
                                    </h6>
                                    <h4 id="exitPrice" class="exit-price">-</h4>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="prediction-box">
                                    <h6 class="text-muted">
                                        Stop-Loss
                                        <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                           title="Stop-Loss: Price to automatically sell to limit losses. Protects your investment if stock price drops unexpectedly."></i>
                                    </h6>
                                    <h4 id="stopLoss" class="stop-loss-price">-</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Technical Analysis Card -->
                <div class="card mb-4">
                    <div class="card-header bg-gradient text-white" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <h5 class="mb-0">
                            üìà Technical Indicators
                            <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                               title="Technical Indicators: Mathematical calculations based on historical price data. Help predict future price movements and identify trends."></i>
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="indicator-item">
                                    <span class="indicator-label">
                                        üìà 50-Day <span class="expanded-term">Simple Moving Average</span>:
                                        <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                           title="50-Day Simple Moving Average (SMA): Average closing price of last 50 trading days. Think of it as a smooth line showing the short-term price trend. If current price is above this line, stock is in uptrend. If below, in downtrend."></i>
                                    </span>
                                    <span id="sma50" class="indicator-value">-</span>
                                </div>
                                <div class="indicator-item">
                                    <span class="indicator-label">
                                        üìä 200-Day <span class="expanded-term">Simple Moving Average</span>:
                                        <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                           title="200-Day Simple Moving Average (SMA): Average closing price of last 200 trading days (~9 months). This is the most important trend indicator. Above this line = strong uptrend, below = major downtrend. Professional traders watch this closely."></i>
                                    </span>
                                    <span id="sma200" class="indicator-value">-</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="indicator-item">
                                    <span class="indicator-label">
                                        ‚ö° <span class="expanded-term">Relative Strength Index</span> (14):
                                        <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                           title="Relative Strength Index (RSI): Momentum oscillator measuring speed of price changes (0-100 scale). Below 30 = stock is oversold (good buying opportunity). Above 70 = overbought (consider selling). 50 is neutral. Helps identify reversal points."></i>
                                    </span>
                                    <span id="rsi" class="indicator-value">-</span>
                                </div>
                                <div class="indicator-item">
                                    <span class="indicator-label">
                                        üìâ <span class="expanded-term">Average True Range</span> (14):
                                        <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                           title="Average True Range (ATR): Measures how much price typically moves up/down each day. High ATR = volatile stock (big price swings). Low ATR = stable stock. Used to set appropriate stop-loss distances based on stock's normal volatility."></i>
                                    </span>
                                    <span id="atr" class="indicator-value">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stock Input and Chart -->
                <div class="card">
                    <div class="card-header bg-gradient text-white" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <h5 class="mb-0">
                            üìä Stock Analysis
                            <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                               title="Stock Analysis: Deep dive into any stock with price charts, technical indicators, and personalized trading recommendations."></i>
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="input-group">
                                    <span class="input-group-text">üìà</span>
                                    <input type="text" id="tickerInput" class="form-control" placeholder="Enter stock ticker (e.g., RELIANCE.NS)">
                                    <span class="input-group-text" style="cursor: help;" data-bs-toggle="tooltip" data-bs-placement="top" 
                                          title="Stock Ticker: Unique stock symbol. Add .NS for Indian stocks (e.g., RELIANCE.NS, TCS.NS, INFY.NS)."></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-light">
                                    <div class="card-body p-3">
                                        <h6 class="mb-3">
                                            üí∞ Choose Your Investment Style
                                            <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                               title="Investment Style: Conservative = Safe investments with small losses, Balanced = Mix of safety and growth, Aggressive = Higher risk for higher returns."></i>
                                        </h6>
                                        <div id="riskAppetite" class="btn-group w-100" role="group">
                                            <input type="radio" class="btn-check" name="risk" id="lowRisk" autocomplete="off">
                                            <label class="btn btn-outline-success" for="lowRisk">
                                                üõ°Ô∏è Conservative<br>
                                                <small>Safe & Steady</small>
                                            </label>

                                            <input type="radio" class="btn-check" name="risk" id="mediumRisk" autocomplete="off" checked>
                                            <label class="btn btn-outline-warning" for="mediumRisk">
                                                ‚öñÔ∏è Balanced<br>
                                                <small>Moderate Risk</small>
                                            </label>

                                            <input type="radio" class="btn-check" name="risk" id="highRisk" autocomplete="off">
                                            <label class="btn btn-outline-danger" for="highRisk">
                                                üöÄ Aggressive<br>
                                                <small>High Risk/Return</small>
                                            </label>
                                        </div>
                                        <div class="mt-2">
                                            <small class="text-muted">
                                                <strong>Stop-Loss:</strong> Conservative (2%), Balanced (5%), Aggressive (10%)
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-primary w-100" id="fetchBtn" title="Get detailed analysis and trading signals for selected stock">
                                    <span>üîç Analyze</span>
                                </button>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="chartFrequency" class="form-label">
                                    üìä Chart Frequency
                                    <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                       title="Chart Frequency: Daily = each trading day, Weekly = each week, Monthly = each month. Longer periods show broader trends, shorter periods show detailed movements."></i>
                                </label>
                                <select class="form-select" id="chartFrequency">
                                    <option value="daily">üìÖ Daily (Each Day)</option>
                                    <option value="weekly">üìÜ Weekly (Each Week)</option>
                                    <option value="monthly">üìà Monthly (Each Month)</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="chartPeriod" class="form-label">
                                    ‚è∞ Time Period
                                    <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                       title="Time Period: How much historical data to show. 1 Month = recent trends, 6 Months = medium-term, 2 Years = long-term patterns."></i>
                                </label>
                                <select class="form-select" id="chartPeriod">
                                    <option value="1mo">üìÖ 1 Month</option>
                                    <option value="6mo">üìÜ 6 Months</option>
                                    <option value="2y" selected>üìà 2 Years</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="chartType" class="form-label">
                                    üìã Chart Type
                                    <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                       title="Chart Type: Line = smooth price connection, Candle = detailed daily price action (open/high/low/close)."></i>
                                </label>
                                <select class="form-select" id="chartType">
                                    <option value="line">üìà Line Chart</option>
                                    <option value="candlestick">üìä Candlestick Chart</option>
                                </select>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="stockChart"></canvas>
                        </div>
                        <div class="mt-2 text-center">
                            <small class="text-muted">
                                <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                                   title="Chart shows historical prices with 50-day and 200-day moving averages. Blue line = current price, Orange line = 50-day SMA (short-term trend), Red line = 200-day SMA (long-term trend)."></i>
                                üí° <strong>How to read:</strong> Blue line above both orange & red = Strong uptrend. Below both = Strong downtrend. Orange crossing red = Trend change signal.
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Educational Footer -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card bg-light">
                    <div class="card-body">
                        <h6 class="card-title">
                            üìö Quick Guide for Beginners
                            <i class="info-icon" data-bs-toggle="tooltip" data-bs-placement="top" 
                               title="Learn the basics of stock market analysis and trading strategies."></i>
                        </h6>
                        <div class="row">
                            <div class="col-md-3">
                                <h6 class="text-primary">üü¢ Buy Signal</h6>
                                <small>Good time to purchase stock. Price expected to rise.</small>
                            </div>
                            <div class="col-md-3">
                                <h6 class="text-danger">üî¥ Sell Signal</h6>
                                <small>Good time to sell stock. Price expected to fall.</small>
                            </div>
                            <div class="col-md-3">
                                <h6 class="text-warning">üü° Hold Signal</h6>
                                <small>Wait for better opportunity. Market uncertain.</small>
                            </div>
                            <div class="col-md-3">
                                <h6 class="text-info">üìä Risk Management</h6>
                                <small>Always use stop-loss to protect your capital.</small>
                            </div>
                        </div>
                        <div class="mt-2">
                            <small class="text-muted">
                                <strong>Disclaimer:</strong> This tool provides educational information only. Not financial advice. 
                                Consult with a qualified financial advisor before making investment decisions. 
                                Stock market investments are subject to market risks.
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Professional Footer -->
    <footer class="bg-dark text-white py-5 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5><i class="fas fa-chart-line me-2"></i>Stock Predictor</h5>
                    <p class="text-muted">Professional stock analysis and prediction platform for informed investment decisions. Powered by advanced AI and real-time market data.</p>
                    <div class="d-flex gap-3">
                        <a href="#" class="text-white"><i class="fab fa-facebook fa-lg"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-linkedin fa-lg"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-instagram fa-lg"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 mb-4">
                    <h6>Product</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="/" class="text-muted text-decoration-none">Dashboard</a></li>
                        <li class="mb-2"><a href="/pricing" class="text-muted text-decoration-none">Pricing</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">Features</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">API</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 mb-4">
                    <h6>Company</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">About Us</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">Careers</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">Blog</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">Press</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 mb-4">
                    <h6>Support</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">Help Center</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">Contact Us</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">Status</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">Documentation</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 mb-4">
                    <h6>Legal</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="/terms" class="text-muted text-decoration-none">Terms of Service</a></li>
                        <li class="mb-2"><a href="/privacy" class="text-muted text-decoration-none">Privacy Policy</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">Cookie Policy</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none">Disclaimer</a></li>
                    </ul>
                </div>
            </div>
            <hr class="bg-white">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2025 Stock Predictor Technologies Pvt. Ltd. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <small class="text-muted">
                        <i class="fas fa-map-marker-alt me-1"></i>Mumbai, India | 
                        <i class="fas fa-envelope me-1"></i>support@stockpredictor.com | 
                        <i class="fas fa-phone me-1"></i>+91-22-1234-5678
                    </small>
                </div>
            </div>
        </div>
    </footer>

    <!-- First Time Onboarding Modal -->
    <div class="modal fade" id="onboardingModal" tabindex="-1" aria-labelledby="onboardingModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="onboardingModalLabel">
                        üéâ Welcome to Stock Predictor - Quick Tour
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Onboarding Carousel -->
                    <div id="onboardingCarousel" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#onboardingCarousel" data-bs-slide-to="0" class="active"></button>
                            <button type="button" data-bs-target="#onboardingCarousel" data-bs-slide-to="1"></button>
                            <button type="button" data-bs-target="#onboardingCarousel" data-bs-slide-to="2"></button>
                            <button type="button" data-bs-target="#onboardingCarousel" data-bs-slide-to="3"></button>
                            <button type="button" data-bs-target="#onboardingCarousel" data-bs-slide-to="4"></button>
                        </div>
                        
                        <div class="carousel-inner">
                            <!-- Slide 1: Welcome -->
                            <div class="carousel-item active">
                                <div class="text-center py-4">
                                    <div class="mb-4">
                                        <i class="fas fa-chart-line" style="font-size: 4rem; color: #007bff;"></i>
                                    </div>
                                    <h4>üöÄ Welcome to Your Stock Analysis Tool!</h4>
                                    <p class="lead">Get intelligent trading recommendations for India's top stocks with technical analysis and risk management.</p>
                                    <div class="alert alert-info">
                                        <strong>What this tool does:</strong><br>
                                        ‚Ä¢ Analyzes NIFTY 200 stocks in real-time<br>
                                        ‚Ä¢ Provides Buy/Sell/Hold signals<br>
                                        ‚Ä¢ Calculates entry, exit, and stop-loss prices<br>
                                        ‚Ä¢ Shows technical indicators and charts
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Slide 2: Understanding Signals -->
                            <div class="carousel-item">
                                <div class="text-center py-4">
                                    <div class="mb-4">
                                        <i class="fas fa-signal" style="font-size: 4rem; color: #28a745;"></i>
                                    </div>
                                    <h4>üìä Understanding Trading Signals</h4>
                                    <div class="row mt-4">
                                        <div class="col-md-4">
                                            <div class="card border-success">
                                                <div class="card-body">
                                                    <h5 class="text-success">üü¢ Buy Signal</h5>
                                                    <p>Stock likely to go up. Good time to purchase.</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="card border-danger">
                                                <div class="card-body">
                                                    <h5 class="text-danger">üî¥ Sell Signal</h5>
                                                    <p>Stock likely to go down. Good time to sell.</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="card border-warning">
                                                <div class="card-body">
                                                    <h5 class="text-warning">üü° Hold Signal</h5>
                                                    <p>Wait for better opportunity. Market uncertain.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="alert alert-light mt-3">
                                        <strong>üí° Tip:</strong> Signals are based on technical analysis including moving averages, RSI, and market trends.
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Slide 3: Risk Management -->
                            <div class="carousel-item">
                                <div class="text-center py-4">
                                    <div class="mb-4">
                                        <i class="fas fa-shield-alt" style="font-size: 4rem; color: #ffc107;"></i>
                                    </div>
                                    <h4>üõ°Ô∏è Choose Your Risk Appetite</h4>
                                    <div class="row mt-4">
                                        <div class="col-md-4">
                                            <div class="card bg-light">
                                                <div class="card-body">
                                                    <h5>üõ°Ô∏è Conservative</h5>
                                                    <p class="small">Safe & Steady</p>
                                                    <strong>Stop-Loss: 2%</strong><br>
                                                    <small>Best for beginners and risk-averse investors</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="card bg-light">
                                                <div class="card-body">
                                                    <h5>‚öñÔ∏è Balanced</h5>
                                                    <p class="small">Moderate Risk</p>
                                                    <strong>Stop-Loss: 5%</strong><br>
                                                    <small>Mix of safety and growth potential</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="card bg-light">
                                                <div class="card-body">
                                                    <h5>üöÄ Aggressive</h5>
                                                    <p class="small">High Risk/Return</p>
                                                    <strong>Stop-Loss: 10%</strong><br>
                                                    <small>Higher risk for potentially higher returns</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="alert alert-warning mt-3">
                                        <strong>‚ö†Ô∏è Important:</strong> Stop-loss automatically sells if price drops to limit your losses. Always use it!
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Slide 4: How to Use -->
                            <div class="carousel-item">
                                <div class="text-center py-4">
                                    <div class="mb-4">
                                        <i class="fas fa-play-circle" style="font-size: 4rem; color: #17a2b8;"></i>
                                    </div>
                                    <h4>üéØ How to Use the Application</h4>
                                    <div class="text-start">
                                        <div class="alert alert-success">
                                            <h5>üìã Step-by-Step Guide:</h5>
                                            <ol>
                                                <li><strong>Select a Stock:</strong> Choose from Top 20 list or enter ticker (e.g., RELIANCE.NS)</li>
                                                <li><strong>Choose Risk Level:</strong> Conservative, Balanced, or Aggressive</li>
                                                <li><strong>Click Analyze:</strong> Get trading signals and price recommendations</li>
                                                <li><strong>Review Results:</strong> Check signal, entry price, exit price, and stop-loss</li>
                                                <li><strong>Study Chart:</strong> Look at price trends with moving averages</li>
                                                <li><strong>Make Decision:</strong> Based on analysis and your risk tolerance</li>
                                            </ol>
                                        </div>
                                        <div class="alert alert-info">
                                            <strong>üí° Pro Tips:</strong><br>
                                            ‚Ä¢ Hover over any blue ‚ÑπÔ∏è icon for detailed explanations<br>
                                            ‚Ä¢ Use filters to find specific types of stocks<br>
                                            ‚Ä¢ Export results for further analysis<br>
                                            ‚Ä¢ Check technical indicators for market insights
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Slide 5: Technical Indicators -->
                            <div class="carousel-item">
                                <div class="text-center py-4">
                                    <div class="mb-4">
                                        <i class="fas fa-chart-area" style="font-size: 4rem; color: #6f42c1;"></i>
                                    </div>
                                    <h4>üìà Understanding Technical Indicators</h4>
                                    <div class="row text-start mt-4">
                                        <div class="col-md-6">
                                            <div class="card border-primary mb-3">
                                                <div class="card-body">
                                                    <h6 class="text-primary">üìä Simple Moving Average (SMA)</h6>
                                                    <p><strong>50-Day SMA:</strong> Short-term trend (last 50 days)</p>
                                                    <p><strong>200-Day SMA:</strong> Long-term trend (last 200 days)</p>
                                                    <small>Price above SMA = Bullish (upward trend)</small><br>
                                                    <small>Price below SMA = Bearish (downward trend)</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card border-info mb-3">
                                                <div class="card-body">
                                                    <h6 class="text-info">‚ö° RSI (Relative Strength Index)</h6>
                                                    <p>Momentum indicator (0-100 scale)</p>
                                                    <small><strong>Below 30:</strong> Oversold (good to buy)</small><br>
                                                    <small><strong>Above 70:</strong> Overbought (good to sell)</small><br>
                                                    <small><strong>30-70:</strong> Neutral zone</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card border-warning">
                                                <div class="card-body">
                                                    <h6 class="text-warning">üìâ ATR (Average True Range)</h6>
                                                    <p>Volatility indicator</p>
                                                    <small><strong>High ATR:</strong> Volatile stock (big price swings)</small><br>
                                                    <small><strong>Low ATR:</strong> Stable stock (small price movements)</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card border-success">
                                                <div class="card-body">
                                                    <h6 class="text-success">üéØ Price Recommendations</h6>
                                                    <p><strong>Entry Price:</strong> Good price to buy (support level)</p>
                                                    <p><strong>Exit Price:</strong> Target price to sell (resistance level)</p>
                                                    <p><strong>Stop-Loss:</strong> Safety net to limit losses</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button class="carousel-control-prev" type="button" data-bs-target="#onboardingCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#onboardingCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="form-check me-auto">
                        <input class="form-check-input" type="checkbox" id="dontShowAgain">
                        <label class="form-check-label" for="dontShowAgain">
                            Don't show this again
                        </label>
                    </div>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Skip Tour</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="finishOnboarding()">Get Started</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script>
        // Initialize all tooltips
        document.addEventListener('DOMContentLoaded', function() {
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl, {
                    delay: { show: 300, hide: 100 },
                    trigger: 'hover focus'
                });
            });
        });
    </script>
</body>
</html>
